<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>√Årea do Admin</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* ... (estilos existentes) ... */
  </style>
</head>
<body>
  <header>üéÑ Projeto Cartinhas de Natal üéÑ</header>
  <nav>
    <a href="index.html">Sobre o Projeto</a>
    <a href="cadastro.html">Novo Cadastro</a>
    <a href="cartinhas.html">Ver Cartinhas</a>
    <a href="admin.html">√Årea do Admin</a>
  </nav>
  <div class="container">
    <h1>Gerenciamento de Cartinhas</h1>
    <div id="login-section">
      </div>
    <div id="data-section" style="display: none;">
      </div>
  </div>

  <script>
    let adminCredentials = {}; 

    // Fun√ß√£o de login (n√£o muda)
    document.getElementById('login-form').addEventListener('submit', async (e) => { /* ... */ });

    // Fun√ß√£o para buscar e mostrar os dados (n√£o muda)
    async function fetchAndDisplayData() { /* ... */ }

    // Fun√ß√£o para montar a tabela (n√£o muda)
    function displayData(data) { /* ... */ }

    // Fun√ß√£o de Edi√ß√£o (CORRIGIDA)
    async function editarCartinha(item) {
      const novoNome = prompt("Editar nome do aluno:", item.nome);
      if (novoNome === null) return; 

      const novaTurma = prompt("Editar turma do aluno:", item.turma);
      if (novaTurma === null) return;

      const novoTexto = prompt("Editar texto da cartinha:", item.texto);
      if (novoTexto === null) return;
      
      // ***** A CORRE√á√ÉO EST√Å AQUI *****
      // Construindo a URL com todos os dados como par√¢metros de busca
      const params = new URLSearchParams({
        action: 'edit',
        id: item.id,
        nome: novoNome,
        turma: novaTurma,
        texto: novoTexto,
        username: adminCredentials.user,
        password: adminCredentials.pass
      });

      const response = await fetch(`/api/server?${params.toString()}`, {
        method: 'POST',
        // O corpo agora vai vazio, pois todos os dados est√£o na URL
      });

      if (response.ok) {
        alert('Cartinha atualizada com sucesso!');
        fetchAndDisplayData(); 
      } else {
        alert('Erro ao atualizar a cartinha.');
      }
    }

    // Fun√ß√£o de Exclus√£o (n√£o muda)
    async function excluirCartinha(id) { /* ... */ }
  </script>
</body>
</html>